<html>
<head>
<title>Promises In javascript</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">


</head>
<body>

<div id="data"  class="container">


</div>


<script>

const mArr = ['Bhaskar Home','Divya Home','Bhaskar Business','Bhaskar Business'];
const home = mArr.map(val => {
	if(val.includes('Home')){
		return val.split(' ')
	}else{
		return val.split(' ')
	}
})
//.reduce((acc,current)=> acc  + current)


console.log(home)


let product = [
	{id: 100, name:'SOAP POWEDER', price:500, qty:1},	
	{id: 103, name:'SOAP',price: "125", qty:1}
]
	
	
	
	const loops = product.map(val=>{
	console.log(val)
		return `<tr><td>${val.id}</td><td >${val.name}</td><td >${val.price}</td><td >${val.qty}</td>
		<td onclick="addProduct('${val.name}','${val.id}','${val.price}')">Add Product</td></tr>`
	})
	var html = ''
	html +='<table class="table"><thead><tr> <th >ID</th><th >Name</th> <th >Price</th><th >Quantity</th><th ></th></tr>'
	html += loops
	html +='</table>'
	document.getElementById('data').innerHTML = html

function addProduct(name,id,price){
	let cart = localStorage.getItem("cart");
	if(cart == null){
		 let Products = [];
		 product = { ProductID:id, ProductName:name, ProductPrice:price, ProductQuatity:1};
		 Products.push(product)
		 localStorage.setItem('cart', JSON.stringify(Products))
	}else{
	//cart already present;
		let pCart = JSON.parse(cart);
		let oldProduct = pCart.find((item) => item.ProductID === id );
			if(oldProduct){
				//we have increase the quantity
				oldProduct.ProductQuatity = oldProduct.ProductQuatity + 1;
				console.log(oldProduct.ProductQuatity)
				pCart.map(item => {
					if(item.ProductID == oldProduct.id ){
					   item.ProductQuatity = oldProduct.ProductQuatity;
					}
				})
				 localStorage.setItem('cart', JSON.stringify(pCart))
			}else{
			//we have increase the product
			 product = { ProductID:id, ProductName:name, ProductPrice:price, ProductQuatity:1};
			 pCart.push(product);
			 localStorage.setItem('cart', JSON.stringify(pCart))
			}
	}
	
	
}


const items = [
      { name: 'A', color: 'Blue', size: 50, locations: ['USA', 'Europe'], details: { length: 20, width: 70 } },
      { name: 'B', color: 'Blue', size: 60, locations: [], details: { length: 20, width: 70 } },
      { name: 'C', color: 'Black', size: 70, locations: ['Japan'], details: { length: 20, width: 71 } },
      { name: 'D', color: 'Green', size: 50, locations: ['USA'], details: { length: 20, width: 71 } },
    ];
	
	function updateItem(arr,key,value){
		copyArr = arr.slice(0);
		dataIndex = arr.findIndex((el)=> el.key  == key )
		if(dataIndex){
		console.log(dataIndex)
			console.log('-1')
		}else{
		console.log('Data available')
		}
	
	
	}
	u = updateItem(items,'name','A');
	console.log(u)
	
	

/*


let cars = [
  {
    "color": "purple",
    "type": "minivan",
    "registration": new Date('2017-01-03'),
    "capacity": 7
  },
  {
    "color": "blue",
    "type": "station wagon",
    "registration": new Date('2018-03-03'),
    "capacity": 5
  },

]

	

let car = {
  "color": "red",
  "type": "cabrio",
  "registration": new Date('2016-05-02'),
  "capacity": 2
}
cars.unshift(car);
cars.push(car)
cars.splice(2,0,car)


findCar = cars.filter(car => car.color == 'red' && car.type === 'cabrio');
 myarray = [];
 sizes  = cars.map(val =>{
	if(val.capacity <=2){
	return "small"}else if(val.capacity <=5){
		return "medius"
	}else{
		return "large"
	}
 })
 console.log(sizes )




function getMultipleValue(){
	let name = "ashok";
	let company ="Chetu";
	return [name, company]
}
console.log(getMultipleValue()	)
const products = [
      { name: 'A', color: 'Blue', size: 50, locations: ['USA', 'Europe'], details: { length: 20, width: 70 } },
      { name: 'B', color: 'Blue', size: 60, locations: [], details: { length: 20, width: 70 } },
      { name: 'C', color: 'Black', size: 70, locations: ['Japan'], details: { length: 20, width: 71 } },
      { name: 'D', color: 'Green', size: 50, locations: ['USA'], details: { length: 20, width: 71 } },
    ];

p1 = {...products}
p1[0].name = "H"
console.log(p1[0].name)
console.log(products[0].name );
const p3 = Object.assign({},products)
const p4 = JSON.parse( JSON.stringify(products))
console.log(p4[0].name="5",products[0].name)

const user = {
  name: 'Sammy',
  email: 'Sammy@domain.com',
  plan: 'Pro'
};

const userStr  = JSON.stringify(user)
JSON.parse(userStr,	(key,value) =>{
console.log(key,value)
	if(typeof value == 'string'){
		return value.toUpperCase()
	}
	return console.log(value)

})









const a = [1, 2, 3];

const b = [4, 5, 6];
const c = [1, 3, 2];

function isEqual (a, b){
	return Array.isArray(a) &&  Array.isArray(b) && a.length === b.length 
	&&  a.every((val, index) => val === val[index]) 
	//&&  a.every((val, index) => val === b[index]);
}

console.log(isEqual (a, c))
console.log(isEqual (a, b))
	
	function isEquals(a,b){
		if(a.length != b.length){
			return false
		}else{
			for(i=0; a.length; i++){
				if(a.length != b.length){
					return false
				}else{
					a.every ((val, index) => val === b[index])
				}
			}
		}
	}

//console.log(isEquals (a, c))

const hero1 = {
  name: 'Batman'
};
const hero2 = {
  name: 'Batman'
};
function isObjectEqual(object1, object2){
	return object1.name === object2.name
}

equa =isObjectEqual(hero1, hero2)
console.log(equa)

const original = {
  name: 'Fiesta',
  car: {
    color: 'blue',
  },
}
function shallowEqual(object1, object2) {
	key1 = Object.keys(object1)
	key2 = Object.keys(object2)
	if(key1 != key2){
		return false
	}
	
	for(key in key2){
		if([key] !== object2[key]){
		return false
		}
	}
	return true
}
value = shallowEqual(hero1, hero2)
console.log(value)



function globalFunction(name){
		counter = 0 
	 function innerFunction(){
		 return  console.log(name+"::"+ counter ++)
	}
	return innerFunction 
}

outer = globalFunction('Bhaskar');
outer()
outer()
outer()
outer()
outer1 = globalFunction('Bhaskar');
outer1()


function deep(originalObj){
	var copy = {};
	for(key in originalObj){
		if(typeof originalObj[key] === 'object'){
			copy[key] = deep(originalObj[key])
		}else{
			copy[key] = originalObj[key]
		}
		
	}
	return copy	
	
}

function deepArray(originalObj){
	
	if(Array.isArray(originalObj)){
		var copy = {};
		for(const [key,value] of Object.entries(originalObj)){
			copy[key] = deepArray(value)
		}
		return copy
	
	}else if( typeof originalObj === 'object'){
		var copy = {};
		for(const [key,value] of Object.entries(originalObj)){
			copy[key] = deepArray(value)
		}
		return copy
	}else{
		return originalObj
	
	}


	
}


deep = deepArray(original);
deep.car.color ='yellow'
console.log(deep,original)
































Object.defineProperty(original, 'PhoneNo',{
	value:9810260933,
	enumerable:true
})

function deepClone(original){
	if(Array.isArray(original)){ 
		var copy = {}
		for(const [key, value] of Object.entries(original)){
			copy[key] = deepClone(value)
		}
		return copy;
	}else if(typeof original == 'object'){
		var copy = {}
		for(const [key, value] of Object.entries(original)){
			copy[key] = deepClone(value)
		}
		return copy;
	}else{
		return original
	}
}

con = deepClone(original);
con.car.color ='block';
original.PhoneNo ='000000'
console.log(con, original)




const copy = {...original};

var data = JSON.stringify(copy)
 parseData = JSON.parse(data)
//parseData.car.color='red'

 function deepCloning(original){
		var copy = {};
		for(var key in original){
			//console.log(key)
			if(typeof original[key] == 'object' ){
					copy[key] = deepCloning(original[key]);
					
					}else{
					copy[key] = original[key]
					console.log(copy[key])
			}
	}
 return copy
 }
 clone = deepCloning(original);
 clone.car.color='red'
 console.log(clone, original)

const items = ['a', 'b', 'c', 'd', 'e', 'f']
 item = 'c'
  rFilter = items.filter(val => val != item);
  mItm = ['d','f']
  removeFilter = items.filter(val =>  !mItm.includes(val))
  
console.log(removeFilter)
//console.log(rFilter)



const girl = {
  name: 'Anna',
  info: { age: 20, number: 123 }
};

const newGirl = { ...girl };
newGirl.info.age = 30;
console.log(girl.info.age, newGirl.info.age);
	
	
function findMaxMin(arr){
	var max = arr[0];
	var min = arr[0];
		for(i=0; i<arr.length; i++){
			if(arr[i] > max){
				max = arr[i]
			}else if(arr[i] < min){
				min = arr[i]
			}
		}
	return{ "max": max,"min": min}
}
maxMin = findMaxMin([4,2,7,8,2,1,1,0])
console.log(maxMin)
// Return an array showing the cumulative sum at each index of an array of integers
	const cumulativeSum  = (arr) => {
		var result = [arr[0]];
		for(i=0; i<arr.length; i++){
			result.push(arr[i]  + result[i+1])
		}
		return result
	}
//c = cumulativeSum([4,2,7,8,2,1,1,0])
//console.log(c)
	newArray = []
	cArr = [0,1,2,3,4];
		for(i=0; i< cArr.length; i++){
			
		}
	console.log(newArray)*/
</script>
</body>
</html>